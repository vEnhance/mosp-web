{% extends 'layout.html' %}
{% load extras %}
{% load static %}
{% block backnav %}
  {% if unlockable.parent %}
    <a class="emoji-link" href="{{ unlockable.parent.get_absolute_url }}">🗺️</a>
  {% else %}
    <a class="emoji-link" href="{{ unlockable.hunt.get_absolute_url }}">🌍</a>
  {% endif %}
{% endblock %}
{% block css %}
  <link rel="stylesheet" type="text/css" href="{% static "bright.css" %}" />
{% endblock %}
{% block title %}{{ unlockable.name }}{% endblock %}
{% block editlink %}<a class="emoji-link" href="{{ unlockable.get_editor_url }}">✏️</a>{% endblock %}
{% block content %}
  {% with u=unlockable %}
    <h1>{{ u.name }}</h1>
    {% if u.parent %}<a href="{{ u.parent.get_absolute_url }}">↩️ Back to round page</a>{% endif %}
    <hr />
    {{ u.intro_story_text|mkd }}
    <h1>
      <a id="door"
         class="text-9xl emoji-link"
         href="{% spaceless %} {% if u.story_only %} {{ request|get_finished_url:u }} {% elif u.puzzle %} {{ u.puzzle.get_absolute_url }} {% elif u.round %} {{ u.round.get_absolute_url }} {% else %} /TODO {% endif %} {% endspaceless %}">🚪</a>
    </h1>
  {% endwith %}
{% endblock %}
